<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Производная: полное руководство</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <style>
        :root {
            --primary-color: #2ecc71;
            --secondary-color: #27ae60;
            --accent-color: #3498db;
            --text-color: #2c3e50;
            --light-bg: #f8f9fa;
            --border-color: #ddd;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.8;
            color: var(--text-color);
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 3px solid var(--primary-color);
        }
        
        h1 {
            color: var(--primary-color);
            font-size: 2.8em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: var(--accent-color);
            font-size: 1.4em;
            font-style: italic;
            margin-bottom: 30px;
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        
        .nav-btn {
            padding: 12px 24px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .back-link {
            display: inline-block;
            padding: 10px 20px;
            background: var(--accent-color);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .section {
            margin-bottom: 60px;
            padding: 30px;
            background: var(--light-bg);
            border-radius: 15px;
            border-left: 5px solid var(--primary-color);
        }
        
        h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }
        
        h3 {
            color: var(--secondary-color);
            margin: 25px 0 15px;
        }
        
        p {
            margin-bottom: 20px;
            text-align: justify;
            font-size: 18px;
        }
        
        .definition-box {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-left: 4px solid var(--primary-color);
            padding: 25px;
            margin: 25px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .theorem-box {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 4px solid var(--accent-color);
            padding: 25px;
            margin: 25px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .example-box {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-left: 4px solid #ff9800;
            padding: 25px;
            margin: 25px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .math-container {
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin: 20px 0;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }
        
        .graph-container {
            width: 100%;
            height: 500px;
            margin: 30px 0;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        th {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background: var(--light-bg);
        }
        
        .interactive-controls {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .slider-container {
            flex: 1;
            min-width: 200px;
        }
        
        .slider-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-color);
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
        }
        
        .value-display {
            font-weight: bold;
            color: var(--primary-color);
            min-width: 60px;
        }
        
        .key-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .key-point {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-top: 4px solid var(--accent-color);
        }
        
        .highlight {
            background: linear-gradient(120deg, #fffb8f 0%, #fffb8f 100%);
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .latex-block {
            font-size: 1.1em;
            line-height: 2;
            margin: 20px 0;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
            color: #7f8c8d;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section {
                padding: 20px;
            }
            
            .graph-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../../index.html" class="back-link">← Вернуться к дереву знаний</a>
            <h1>Производная: полное руководство</h1>
            <div class="subtitle">
                Исчисление, геометрический смысл, правила дифференцирования и практическое применение
            </div>
            
            <div class="navigation">
                <button class="nav-btn" onclick="scrollToSection('definition')">Определение</button>
                <button class="nav-btn" onclick="scrollToSection('meaning')">Смысл</button>
                <button class="nav-btn" onclick="scrollToSection('rules')">Правила</button>
                <button class="nav-btn" onclick="scrollToSection('examples')">Примеры</button>
                <button class="nav-btn" onclick="scrollToSection('applications')">Применение</button>
            </div>
        </header>

        <section id="definition" class="section">
            <h2>1. Определение производной</h2>
            
            <p>Производная — фундаментальное понятие математического анализа, характеризующее скорость изменения функции в данной точке. Она является основным инструментом дифференциального исчисления.</p>
            
            <div class="definition-box">
                <h3>Формальное определение</h3>
                <div class="latex-block">
                    Производная функции \( f(x) \) в точке \( x_0 \) определяется как предел:
                    \[
                    f'(x_0) = \lim_{\Delta x \to 0} \frac{f(x_0 + \Delta x) - f(x_0)}{\Delta x}
                    \]
                    или эквивалентно:
                    \[
                    f'(x_0) = \lim_{h \to 0} \frac{f(x_0 + h) - f(x_0)}{h}
                    \]
                </div>
                <p>Если этот предел существует и конечен, функция называется <span class="highlight">дифференцируемой</span> в точке \( x_0 \).</p>
            </div>
            
            <h3>Обозначения производной</h3>
            <p>В математике используются различные обозначения производной:</p>
            
            <div class="math-container">
                <table>
                    <tr>
                        <th>Обозначение</th>
                        <th>Читается как</th>
                        <th>Автор</th>
                    </tr>
                    <tr>
                        <td>\( f'(x) \)</td>
                        <td>"эф штрих от икс"</td>
                        <td>Лагранж (1797)</td>
                    </tr>
                    <tr>
                        <td>\( \frac{df}{dx} \)</td>
                        <td>"дэ эф по дэ икс"</td>
                        <td>Лейбниц (1684)</td>
                    </tr>
                    <tr>
                        <td>\( Df(x) \)</td>
                        <td>"дэ от эф от икс"</td>
                        <td>Коши (1823)</td>
                    </tr>
                    <tr>
                        <td>\( \dot{f} \)</td>
                        <td>"эф с точкой"</td>
                        <td>Ньютон (1691)</td>
                    </tr>
                </table>
            </div>
            
            <div id="definition-graph" class="graph-container"></div>
            
            <div class="interactive-controls">
                <div class="slider-container">
                    <label class="slider-label">Точка \( x_0 \): <span id="x0-value" class="value-display">2.0</span></label>
                    <input type="range" min="-3" max="3" step="0.1" value="2" class="slider" id="x0-slider">
                </div>
                <div class="slider-container">
                    <label class="slider-label">Приращение \( \Delta x \): <span id="dx-value" class="value-display">0.5</span></label>
                    <input type="range" min="0.1" max="2" step="0.1" value="0.5" class="slider" id="dx-slider">
                </div>
            </div>
        </section>

        <section id="meaning" class="section">
            <h2>2. Геометрический и физический смысл</h2>
            
            <h3>Геометрическая интерпретация</h3>
            <p>Производная функции в точке равна угловому коэффициенту касательной к графику функции в этой точке:</p>
            
            <div class="math-container">
                <div class="latex-block">
                    \[
                    f'(x_0) = \tan \alpha = k
                    \]
                    где \( \alpha \) — угол наклона касательной, \( k \) — угловой коэффициент.
                </div>
            </div>
            
            <p>Уравнение касательной в точке \( (x_0, f(x_0)) \):</p>
            <div class="math-container">
                <div class="latex-block">
                    \[
                    y = f(x_0) + f'(x_0)(x - x_0)
                    \]
                </div>
            </div>
            
            <div id="tangent-graph" class="graph-container"></div>
            
            <h3>Физическая интерпретация</h3>
            <p>В физике производная имеет множество интерпретаций:</p>
            
            <div class="key-points">
                <div class="key-point">
                    <h4>Механика</h4>
                    <p>Если \( s(t) \) — закон движения, то:</p>
                    <div class="latex-block">
                        \[
                        v(t) = s'(t) \quad \text{(скорость)}
                        \]
                        \[
                        a(t) = v'(t) = s''(t) \quad \text{(ускорение)}
                        \]
                    </div>
                </div>
                
                <div class="key-point">
                    <h4>Электротехника</h4>
                    <p>Если \( q(t) \) — заряд, то:</p>
                    <div class="latex-block">
                        \[
                        I(t) = q'(t) \quad \text{(сила тока)}
                        \]
                    </div>
                </div>
                
                <div class="key-point">
                    <h4>Термодинамика</h4>
                    <p>Если \( T(x) \) — температура, то:</p>
                    <div class="latex-block">
                        \[
                        \frac{dT}{dx} \quad \text{(температурный градиент)}
                        \]
                    </div>
                </div>
            </div>
        </section>

        <section id="rules" class="section">
            <h2>3. Основные правила дифференцирования</h2>
            
            <div class="theorem-box">
                <h3>Теорема о линейности</h3>
                <div class="latex-block">
                    \[
                    (c \cdot f(x))' = c \cdot f'(x), \quad c \in \mathbb{R}
                    \]
                    \[
                    (f(x) \pm g(x))' = f'(x) \pm g'(x)
                    \]
                </div>
            </div>
            
            <h3>Правило произведения и частного</h3>
            <div class="math-container">
                <div class="latex-block">
                    <strong>Произведение:</strong>
                    \[
                    (f(x) \cdot g(x))' = f'(x) \cdot g(x) + f(x) \cdot g'(x)
                    \]
                    
                    <strong>Частное:</strong>
                    \[
                    \left( \frac{f(x)}{g(x)} \right)' = \frac{f'(x) \cdot g(x) - f(x) \cdot g'(x)}{[g(x)]^2}, \quad g(x) \neq 0
                    \]
                </div>
            </div>
            
            <h3>Правило цепочки (производная сложной функции)</h3>
            <div class="math-container">
                <div class="latex-block">
                    Если \( y = f(g(x)) \), то:
                    \[
                    y'_x = f'(g(x)) \cdot g'(x)
                    \]
                    или в обозначениях Лейбница:
                    \[
                    \frac{dy}{dx} = \frac{dy}{du} \cdot \frac{du}{dx}, \quad \text{где } u = g(x)
                    \]
                </div>
            </div>
            
            <h3>Таблица производных элементарных функций</h3>
            <div class="math-container">
                <table>
                    <tr>
                        <th>Функция \( f(x) \)</th>
                        <th>Производная \( f'(x) \)</th>
                        <th>Ограничения</th>
                    </tr>
                    <tr>
                        <td>\( c \) (константа)</td>
                        <td>\( 0 \)</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>\( x^n \)</td>
                        <td>\( n \cdot x^{n-1} \)</td>
                        <td>\( n \in \mathbb{R} \)</td>
                    </tr>
                    <tr>
                        <td>\( e^x \)</td>
                        <td>\( e^x \)</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>\( a^x \)</td>
                        <td>\( a^x \cdot \ln a \)</td>
                        <td>\( a > 0, a \neq 1 \)</td>
                    </tr>
                    <tr>
                        <td>\( \ln x \)</td>
                        <td>\( \frac{1}{x} \)</td>
                        <td>\( x > 0 \)</td>
                    </tr>
                    <tr>
                        <td>\( \sin x \)</td>
                        <td>\( \cos x \)</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>\( \cos x \)</td>
                        <td>\( -\sin x \)</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>\( \tan x \)</td>
                        <td>\( \frac{1}{\cos^2 x} = \sec^2 x \)</td>
                        <td>\( x \neq \frac{\pi}{2} + \pi n \)</td>
                    </tr>
                </table>
            </div>
        </section>

        <section id="examples" class="section">
            <h2>4. Примеры и решения</h2>
            
            <div class="example-box">
                <h3>Пример 1: Производная полинома</h3>
                <p>Найти производную функции \( f(x) = 3x^4 - 2x^3 + 5x - 7 \).</p>
                
                <div class="math-container">
                    <div class="latex-block">
                        <strong>Решение:</strong><br>
                        Используем правило линейности и производную степенной функции:
                        \[
                        \begin{aligned}
                        f'(x) &= (3x^4)' - (2x^3)' + (5x)' - (7)' \\
                        &= 3 \cdot 4x^{3} - 2 \cdot 3x^{2} + 5 \cdot 1 - 0 \\
                        &= 12x^3 - 6x^2 + 5
                        \end{aligned}
                        \]
                    </div>
                </div>
            </div>
            
            <div class="example-box">
                <h3>Пример 2: Производная произведения</h3>
                <p>Найти производную функции \( f(x) = x^2 \cdot e^x \).</p>
                
                <div class="math-container">
                    <div class="latex-block">
                        <strong>Решение:</strong><br>
                        Применяем правило произведения:
                        \[
                        \begin{aligned}
                        f'(x) &= (x^2)' \cdot e^x + x^2 \cdot (e^x)' \\
                        &= 2x \cdot e^x + x^2 \cdot e^x \\
                        &= e^x(2x + x^2) \\
                        &= x e^x (2 + x)
                        \end{aligned}
                        \]
                    </div>
                </div>
            </div>
            
            <div class="example-box">
                <h3>Пример 3: Производная сложной функции</h3>
                <p>Найти производную функции \( f(x) = \sin(3x^2 + 2) \).</p>
                
                <div class="math-container">
                    <div class="latex-block">
                        <strong>Решение:</strong><br>
                        Используем правило цепочки:
                        \[
                        \begin{aligned}
                        f'(x) &= \cos(3x^2 + 2) \cdot (3x^2 + 2)' \\
                        &= \cos(3x^2 + 2) \cdot 6x \\
                        &= 6x \cos(3x^2 + 2)
                        \end{aligned}
                        \]
                    </div>
                </div>
            </div>
            
            <div id="derivative-compare" class="graph-container"></div>
        </section>

        <section id="applications" class="section">
            <h2>5. Практические применения производной</h2>
            
            <h3>Исследование функции</h3>
            <p>Производная позволяет анализировать поведение функции:</p>
            
            <div class="key-points">
                <div class="key-point">
                    <h4>Возрастание/убывание</h4>
                    <div class="latex-block">
                        \[
                        f'(x) > 0 \Rightarrow f(x) \text{ возрастает}
                        \]
                        \[
                        f'(x) < 0 \Rightarrow f(x) \text{ убывает}
                        \]
                    </div>
                </div>
                
                <div class="key-point">
                    <h4>Экстремумы</h4>
                    <div class="latex-block">
                        Если \( f'(x_0) = 0 \) и производная меняет знак:
                        \[
                        \begin{cases}
                        + \to - & \text{локальный максимум} \\
                        - \to + & \text{локальный минимум}
                        \end{cases}
                        \]
                    </div>
                </div>
                
                <div class="key-point">
                    <h4>Выпуклость</h4>
                    <div class="latex-block">
                        Вторая производная:
                        \[
                        f''(x) > 0 \Rightarrow \text{выпукла вниз}
                        \]
                        \[
                        f''(x) < 0 \Rightarrow \text{выпукла вверх}
                        \]
                    </div>
                </div>
            </div>
            
            <h3>Оптимизация</h3>
            <p>Производная находит применение в задачах оптимизации:</p>
            
            <div class="example-box">
                <h4>Пример: задача на максимизацию площади</h4>
                <p>Из проволоки длиной 20 см нужно сделать прямоугольник максимальной площади. Каковы должны быть его стороны?</p>
                
                <div class="math-container">
                    <div class="latex-block">
                        <strong>Решение:</strong><br>
                        Пусть стороны прямоугольника \( x \) и \( y \).<br>
                        Периметр: \( 2(x + y) = 20 \Rightarrow y = 10 - x \)<br>
                        Площадь: \( S(x) = x \cdot y = x(10 - x) = 10x - x^2 \)<br>
                        Находим производную:
                        \[
                        S'(x) = 10 - 2x
                        \]
                        Приравниваем к нулю:
                        \[
                        10 - 2x = 0 \Rightarrow x = 5
                        \]
                        Проверяем, что это максимум:
                        \[
                        S''(x) = -2 < 0 \Rightarrow \text{максимум}
                        \]
                        Ответ: квадрат со стороной 5 см, площадь \( S = 25 \, \text{см}^2 \).
                    </div>
                </div>
            </div>
            
            <h3>Приближенные вычисления</h3>
            <div class="math-container">
                <div class="latex-block">
                    Формула линейного приближения:
                    \[
                    f(x) \approx f(x_0) + f'(x_0)(x - x_0)
                    \]
                    Пример: \( \sqrt{4.1} \approx \sqrt{4} + \frac{1}{2\sqrt{4}}(4.1 - 4) = 2 + \frac{0.1}{4} = 2.025 \)
                </div>
            </div>
            
            <div id="optimization-graph" class="graph-container"></div>
        </section>

        <section id="conclusion" class="section">
            <h2>Выводы</h2>
            
            <div class="key-points">
                <div class="key-point">
                    <h4>Фундаментальность</h4>
                    <p>Производная — краеугольный камень математического анализа, связывающий алгебру с геометрией и физикой.</p>
                </div>
                
                <div class="key-point">
                    <h4>Многогранность</h4>
                    <p>Одно математическое понятие описывает скорость, наклон, скорость изменения, чувствительность — в зависимости от контекста.</p>
                </div>
                
                <div class="key-point">
                    <h4>Прикладное значение</h4>
                    <p>От физики до экономики, от техники до биологии — производная является универсальным инструментом моделирования реальности.</p>
                </div>
            </div>
            
            <div class="theorem-box">
                <h3>Историческая справка</h3>
                <p>Понятие производной независимо развивалось Ньютоном (флюксии) и Лейбницем (дифференциалы) в XVII веке. Современное определение через пределы дано Коши в XIX веке. Идеи дифференциального исчисления предвосхищались ещё в работах Архимеда, Ферма и Барроу.</p>
            </div>
        </section>

        <footer>
            <p>© 2024 Математический анализ для физиков</p>
            <p>Материал подготовлен для образовательных целей. Для углубленного изучения рекомендованы учебники:</p>
            <p>1. Фихтенгольц Г.М. "Курс дифференциального и интегрального исчисления"</p>
            <p>2. Зорич В.А. "Математический анализ"</p>
        </footer>
    </div>

    <script>
        // Инициализация MathJax
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };

        // Функция для скролла к секциям
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({
                behavior: 'smooth'
            });
        }

        // Инициализация графиков после загрузки DOM
        document.addEventListener('DOMContentLoaded', function() {
            initializeGraphs();
            setupSliders();
        });

        function initializeGraphs() {
            // График 1: Визуализация определения производной
            const trace1 = {
                x: [-3, 5],
                y: [-3, 5].map(x => Math.pow(x - 1, 2) + 1), // f(x) = (x-1)^2 + 1
                mode: 'lines',
                name: 'f(x) = (x-1)² + 1',
                line: {color: 'blue', width: 3}
            };

            const x0 = 2;
            const dx = 0.5;
            const y0 = Math.pow(x0 - 1, 2) + 1;
            const y1 = Math.pow(x0 + dx - 1, 2) + 1;

            const trace2 = {
                x: [x0, x0 + dx],
                y: [y0, y0],
                mode: 'lines',
                name: 'Δx',
                line: {color: 'green', width: 2, dash: 'dash'}
            };

            const trace3 = {
                x: [x0 + dx, x0 + dx],
                y: [y0, y1],
                mode: 'lines',
                name: 'Δy',
                line: {color: 'red', width: 2, dash: 'dash'}
            };

            const trace4 = {
                x: [x0, x0 + dx],
                y: [y0, y1],
                mode: 'lines',
                name: 'Секущая',
                line: {color: 'purple', width: 2}
            };

            const layout1 = {
                title: 'Определение производной: f\'(x₀) = lim<sub>Δx→0</sub> Δy/Δx',
                xaxis: {title: 'x', range: [-1, 4]},
                yaxis: {title: 'f(x)', range: [0, 6]},
                showlegend: true,
                legend: {x: 0.02, y: 0.98},
                annotations: [
                    {
                        x: x0,
                        y: y0,
                        text: `P(${x0}, ${y0.toFixed(1)})`,
                        showarrow: true,
                        arrowhead: 2
                    },
                    {
                        x: x0 + dx,
                        y: y1,
                        text: `Q(${(x0 + dx).toFixed(1)}, ${y1.toFixed(1)})`,
                        showarrow: true,
                        arrowhead: 2
                    },
                    {
                        x: (2*x0 + dx)/2,
                        y: y0 - 0.3,
                        text: `Δx = ${dx}`,
                        showarrow: false,
                        font: {color: 'green'}
                    },
                    {
                        x: x0 + dx + 0.1,
                        y: (y0 + y1)/2,
                        text: `Δy = ${(y1 - y0).toFixed(2)}`,
                        showarrow: false,
                        font: {color: 'red'}
                    }
                ]
            };

            Plotly.newPlot('definition-graph', [trace1, trace2, trace3, trace4], layout1);

            // График 2: Касательная и производная
            const xValues = [];
            const fValues = [];
            const tangentValues = [];
            
            for (let x = -2; x <= 4; x += 0.1) {
                xValues.push(x);
                fValues.push(Math.sin(x) + 0.1 * Math.pow(x, 2));
                const x0_tangent = 1.5;
                const y0_tangent = Math.sin(x0_tangent) + 0.1 * Math.pow(x0_tangent, 2);
                const derivative = Math.cos(x0_tangent) + 0.2 * x0_tangent;
                tangentValues.push(y0_tangent + derivative * (x - x0_tangent));
            }

            const trace5 = {
                x: xValues,
                y: fValues,
                mode: 'lines',
                name: 'f(x) = sin(x) + 0.1x²',
                line: {color: 'blue', width: 3}
            };

            const trace6 = {
                x: xValues,
                y: tangentValues,
                mode: 'lines',
                name: 'Касательная в x₀ = 1.5',
                line: {color: 'red', width: 2, dash: 'dash'}
            };

            const layout2 = {
                title: 'Геометрический смысл производной: f\'(x₀) = tg(α)',
                xaxis: {title: 'x'},
                yaxis: {title: 'f(x)'},
                showlegend: true,
                annotations: [
                    {
                        x: 1.5,
                        y: Math.sin(1.5) + 0.1 * Math.pow(1.5, 2),
                        text: 'Точка касания',
                        showarrow: true,
                        arrowhead: 2
                    }
                ]
            };

            Plotly.newPlot('tangent-graph', [trace5, trace6], layout2);

            // График 3: Сравнение функции и её производной
            const xRange = [];
            const funcValues = [];
            const derivValues = [];
            const secondDerivValues = [];
            
            for (let x = -3; x <= 3; x += 0.1) {
                xRange.push(x);
                const fx = Math.pow(x, 3) - 3 * x;
                const fpx = 3 * Math.pow(x, 2) - 3;
                const fppx = 6 * x;
                
                funcValues.push(fx);
                derivValues.push(fpx);
                secondDerivValues.push(fppx);
            }

            const trace7 = {
                x: xRange,
                y: funcValues,
                mode: 'lines',
                name: 'f(x) = x³ - 3x',
                line: {color: 'blue', width: 3}
            };

            const trace8 = {
                x: xRange,
                y: derivValues,
                mode: 'lines',
                name: 'f\'(x) = 3x² - 3',
                line: {color: 'red', width: 2}
            };

            const trace9 = {
                x: xRange,
                y: secondDerivValues,
                mode: 'lines',
                name: 'f\'\'(x) = 6x',
                line: {color: 'green', width: 2, dash: 'dot'}
            };

            const layout3 = {
                title: 'Функция и её производные',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                showlegend: true,
                legend: {orientation: 'h', y: -0.2}
            };

            Plotly.newPlot('derivative-compare', [trace7, trace8, trace9], layout3);

            // График 4: Задача оптимизации
            const xOpt = [];
            const areaValues = [];
            
            for (let x = 0; x <= 10; x += 0.1) {
                xOpt.push(x);
                areaValues.push(x * (10 - x)); // S(x) = x*(10-x)
            }

            const trace10 = {
                x: xOpt,
                y: areaValues,
                mode: 'lines',
                name: 'S(x) = x(10-x)',
                line: {color: 'blue', width: 3}
            };

            const maxX = 5;
            const maxY = maxX * (10 - maxX);

            const trace11 = {
                x: [maxX],
                y: [maxY],
                mode: 'markers',
                name: 'Максимум',
                marker: {color: 'red', size: 12}
            };

            const layout4 = {
                title: 'Оптимизация: максимизация площади прямоугольника',
                xaxis: {title: 'Сторона x (см)'},
                yaxis: {title: 'Площадь S (см²)'},
                showlegend: true,
                annotations: [
                    {
                        x: maxX,
                        y: maxY,
                        text: `Максимум: (5, 25)`,
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -40
                    }
                ]
            };

            Plotly.newPlot('optimization-graph', [trace10, trace11], layout4);
        }

        function setupSliders() {
            const x0Slider = document.getElementById('x0-slider');
            const dxSlider = document.getElementById('dx-slider');
            const x0Value = document.getElementById('x0-value');
            const dxValue = document.getElementById('dx-value');

            function updateGraph() {
                const x0 = parseFloat(x0Slider.value);
                const dx = parseFloat(dxSlider.value);
                
                x0Value.textContent = x0.toFixed(1);
                dxValue.textContent = dx.toFixed(1);

                // Обновляем график с новыми значениями
                const trace1 = {
                    x: [-3, 5],
                    y: [-3, 5].map(x => Math.pow(x - 1, 2) + 1),
                    mode: 'lines',
                    name: 'f(x) = (x-1)² + 1',
                    line: {color: 'blue', width: 3}
                };

                const y0 = Math.pow(x0 - 1, 2) + 1;
                const y1 = Math.pow(x0 + dx - 1, 2) + 1;

                const trace2 = {
                    x: [x0, x0 + dx],
                    y: [y0, y0],
                    mode: 'lines',
                    name: 'Δx',
                    line: {color: 'green', width: 2, dash: 'dash'}
                };

                const trace3 = {
                    x: [x0 + dx, x0 + dx],
                    y: [y0, y1],
                    mode: 'lines',
                    name: 'Δy',
                    line: {color: 'red', width: 2, dash: 'dash'}
                };

                const trace4 = {
                    x: [x0, x0 + dx],
                    y: [y0, y1],
                    mode: 'lines',
                    name: 'Секущая',
                    line: {color: 'purple', width: 2}
                };

                const layout = {
                    title: `Определение производной: Δy/Δx = ${((y1 - y0)/dx).toFixed(2)}`,
                    xaxis: {title: 'x', range: [-1, 4]},
                    yaxis: {title: 'f(x)', range: [0, 6]},
                    showlegend: true,
                    legend: {x: 0.02, y: 0.98},
                    annotations: [
                        {
                            x: x0,
                            y: y0,
                            text: `P(${x0.toFixed(1)}, ${y0.toFixed(1)})`,
                            showarrow: true,
                            arrowhead: 2
                        },
                        {
                            x: x0 + dx,
                            y: y1,
                            text: `Q(${(x0 + dx).toFixed(1)}, ${y1.toFixed(1)})`,
                            showarrow: true,
                            arrowhead: 2
                        },
                        {
                            x: (2*x0 + dx)/2,
                            y: y0 - 0.3,
                            text: `Δx = ${dx.toFixed(1)}`,
                            showarrow: false,
                            font: {color: 'green'}
                        },
                        {
                            x: x0 + dx + 0.1,
                            y: (y0 + y1)/2,
                            text: `Δy = ${(y1 - y0).toFixed(2)}`,
                            showarrow: false,
                            font: {color: 'red'}
                        }
                    ]
                };

                Plotly.react('definition-graph', [trace1, trace2, trace3, trace4], layout);
            }

            x0Slider.addEventListener('input', updateGraph);
            dxSlider.addEventListener('input', updateGraph);
        }
    </script>
</body>
</html>